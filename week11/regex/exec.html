
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .keywords {
      color: blue;
    }
    .indentifier {
      color: skyblue;
    }
    .punctuator {
      color: blueviolet;
    }
  </style>
</head>
<body>
  <pre id="container">

  </pre>
</body>
</html>
<script>
  const source = `
  function sleep(t) {
    return new Promise(resolve => {
      setTimeout(() => {
        resolve()
      }, t);
    })
  }
`;

var regexp = /(function|new|return)|([ \t\n\r]+)|([a-zA-Z][a-zA-Z0-9]*)|([\(\)\{\}\,\;])/g

var dictionary = ["keywords", 'whitespace', 'indentifier', 'punctuator'];

var token = null;
var lastIndex = 0;
var container = document.getElementById('container');
do {
  lastIndex = regexp.lastIndex;
  token = regexp.exec(source);
  if (!token) break;
  let text = document.createElement('span');
  text.textContent = token[0];

  for (let i = 0; i < 5; i++) {
    if (token[i]) {
      // console.log(dictionary[i - 1], token[0])
      text.classList.add(dictionary[i - 1]);
    }
  }
  container.appendChild(text);
} while(token)
</script>